<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vibration API</title>
  <link rel="stylesheet" type="text/css" href="base.css">
</head>
<body>
  <h1>Vibration API</h1>
  <script type="text/javascript">
    var originalVibrate = navigator.vibrate;

    navigator.vibrate = function(pattern) {
      console.log(pattern);
      document.title = Date.now() + ' : ' + pattern;
      originalVibrate.call(navigator, pattern);
    }

    function startVibrate(pattern) {
      navigator.vibrate(pattern);
    }

    var vibrateInterval;
    function startPersistentVibrate(pattern, interval) {
      vibrateInterval = setInterval(function() {
        startVibrate(pattern);
      }, interval);
    }
    
    var randomVibrateInterval;
    function startRandomPersistentVibrate() {
      randomVibrateInterval = setInterval(function() {
        startVibrate(Math.round(Math.random() * 1000));
      }, 1);
    }
    function stopVibrate() {
      if (vibrateInterval) clearInterval(vibrateInterval);
      if (randomVibrateInterval) clearInterval(randomVibrateInterval);
      navigator.vibrate(0);
    }
  </script>

  <p><button onclick="startVibrate(1000);">Vibrate Once</button></p>
  <p><button onclick="startVibrate([1000, 200, 1000, 2000, 400]);">Vibrate Multiple Times</button></p>
  <p><button onclick="startPersistentVibrate(1000, 1500);">Vibrate Persistently</button></p>
  <p><button onclick="startRandomPersistentVibrate();">Random persistent overload</button></p>
  <p><button onclick="stopVibrate();">Stop</button></p>
</body>
</html>
